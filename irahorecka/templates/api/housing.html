{% extends "layout.html" %}
{% block js %}
<script defer src="{{ url_for('static', filename="external/htmx-1.5.0.min.js") }}"></script>
{% endblock js %}
{% block content %}
<h1 class="font-extrabold tracking-tight text-gray-900 text-4xl mt-8 lg:mt-0 sm:text-5xl lg:text-6xl">Housing</h1>
<p class="mt-6 text-xl leading-8 text-gray-500">
  Finding housing on Craigslist isn't fun. That's why I made this little tool to help you find the best housing deals for your next move.
  This tool is also available for developers, check out the API docs
  <a href="https://api.localhost:5000/housing/docs" class="text-yellow-600 hover:underline">here</a>.
</p>
<p class="mt-6 text-xl leading-8 text-gray-500">
  The current scope is in the San Francisco Bay Area. Email me if you'd like to see a new location. üèòÔ∏è
</p>
<div class="pt-12 sm:pt-16">
  <h2 class="text-2xl font-bold">SF Bay Area</h2>
  <form class="mt-8 w-full">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
      <label class="block">
        <span class="text-gray-700">Area</span>
        <select name="area" id="area" hx-post="/api/neighborhoods" hx-trigger="change, load" hx-target="#neighborhood" class="block w-full p-2 mt-1 rounded-md bg-gray-100 border-transparent focus:border-gray-500 focus:bg-white focus:ring-0">
          <option>-</option>
          <option>East Bay</option>
          <option>North Bay</option>
          <option>Peninsula</option>
          <option>San Francisco</option>
          <option>Santa Cruz</option>
          <option>South Bay</option>
        </select>
      </label>
      <label class="block">
      <span class="text-gray-700">Neighborhood</span>
      <select name="neighborhood" id="neighborhood" hx-trigger="changed from:#area" class="block w-full p-2 mt-1 rounded-md bg-gray-100 border-transparent focus:border-gray-500 focus:bg-white focus:ring-0">
      {% include 'api/neighborhoods.html' %}
      </select>
      </label>
      <label class="block">
        <span class="text-gray-700">Price (USD)</span>
        <div class="mt-1 flex flex-row space-x-3">
          <input name="min_price" type="number" min="1" max="100000" step="1" class="w-1/2 mb-0 p-2 block rounded-md bg-gray-100 border-transparent focus:border-gray-500 focus:bg-white focus:ring-0" placeholder="Min">
          <p class="w-1/16 left-0 m-auto">to</p>
          <input name="max_price" type="number" min="1" max="100000" step="1" class="w-1/2 mt-0 p-2 block rounded-md bg-gray-100 border-transparent focus:border-gray-500 focus:bg-white focus:ring-0" placeholder="Max">
        </div>
      </label>
      <button name="submit" id="submit" hx-post="/api/submit" hx-trigger="click" hx-target="#table" class="bg-blue-500 hover:bg-blue-700 focus:outline-none text-white font-bold py-2 px-4 rounded-full">Search</button>
    </div>
  </form>
  <div name="table" id="table" hx-trigger="clicked from:#submit">
  {% if post is mapping %}
    {% include 'api/table.html' %}
  {% endif %}
  </div>
</div>
{% endblock content %}
